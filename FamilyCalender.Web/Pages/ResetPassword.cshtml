@page
@model FamilyCalender.Web.Pages.ResetPasswordModel
@{
}

@if (!string.IsNullOrEmpty(Model.ErrorMessage))
{
    <p class="text-danger">@Model.ErrorMessage</p>
}

<form method="post">
    <input type="hidden" asp-for="Token" />

    <div class="form-floating mb-3 position-relative">
        <input asp-for="NewPassword" class="form-control" autocomplete="new-password" aria-required="true" placeholder="new password" id="NewPassword" type="password" />
        <label asp-for="NewPassword">Lösenord</label>
        <i class="bi bi-eye-slash" id="eye-icon-NewPassword" onclick="togglePasswordVisibility('NewPassword')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.2em; z-index: 10; background: white; color: #6c757d;"></i>
    </div>

    <div class="form-floating mb-3 position-relative">
        <input asp-for="ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" placeholder="confirm password" id="ConfirmPassword" type="password" />
        <label asp-for="ConfirmPassword">Bekräfta lösenord</label>
        <i class="bi bi-eye-slash" id="eye-icon-ConfirmPassword" onclick="togglePasswordVisibility('ConfirmPassword')" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.2em; z-index: 10; background: white; color: #6c757d;"></i>
    </div>

    <button type="submit" class="btn btn-primary">Spara nytt lösenord</button>
</form>

@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <p class="mt-2">@Model.SuccessMessage</p>

    <a class="mt-2 btn btn-primary" asp-page="/Login">Logga in</a>
}

<script>
    function togglePasswordVisibility(inputId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById("eye-icon-" + inputId);

        if (input.type === "password") {
            input.type = "text";
            icon.classList.remove("bi-eye-slash");
            icon.classList.add("bi-eye");
        } else {
            input.type = "password";
            icon.classList.remove("bi-eye");
            icon.classList.add("bi-eye-slash");
        }
    }
</script>